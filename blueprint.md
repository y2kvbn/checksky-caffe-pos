
# blueprint.md（任務清單）

---

### 總覽

本專案為一個 Point-of-Sale (POS) 系統的前端應用，使用 Vue.js、TypeScript、Vite 和 Pinia 建立。旨在提供一個現代化、高效且易於維護的界面，用於管理餐廳的各個方面，包括菜單、訂單、預約、促銷和系統設定。

### 風格與設計

本專案將遵循現代化的設計原則，注重使用者體驗和視覺吸引力。

*   **排版**: 使用清晰、易讀的字體，並透過大小和粗細的對比來組織資訊層次。
*   **色彩**: 採用乾淨、專業的色盤，並策略性地使用強調色來引導使用者的注意力。
*   **佈局**: 響應式佈局，確保在桌面和行動裝置上都能提供最佳體驗。
*   **元件**: 使用圓角、陰影和過渡效果，創造一個有深度且具互動性的介面。

### 功能

*   **身份驗證**: 使用者登入和登出、忘記密碼。
*   **儀表板**: 顯示關鍵指標和快速導航。
*   **POS**: 處理客戶訂單。
*   **菜單管理**: 新增、編輯和刪除菜單項目。
*   **預約管理**: 管理客戶預約。
*   **營收分析**: 視覺化銷售數據。
*   **促銷管理**: 建立和管理促銷活動。
*   **系統設定**: 配置應用程式設定。

---

### 任務 1：程式碼基礎整理與 TypeScript 統一

1.  **目標**：
    將專案中的 \`.js\` 檔案完全轉換為 \`.ts\`，統一程式碼風格與結構，並建立必要的紀錄文件，但不更動任何既有功能與畫面。

2.  **執行步驟**：
    *   [x] **步驟 1**: 統一 Pinia stores 為 TypeScript。
    *   [x] **步驟 2**: 整理入口檔案與路由。
    *   [x] **步驟 3**: 整理 \`components\` 資料夾。

---

### 任務 2：元件重構與樣式改進

1.  **目標**：
    對現有元件進行重構，改善其結構、可讀性和樣式，使其更符合現代化的設計標準。

---

### 任務 3：修復購物車錯誤

1.  **目標**：
    修復在特定條件下觸發的購物車計算錯誤與功能無效的問題。

---

### 任務 4：調整樣式

1. **目標**:
    調整首頁與登入頁樣式。

---

### 任務 5：刪除無用檔案

1. **目標**:
    刪除專案中不再使用的檔案。

---

### 任務 6：優化登入畫面

1. **目標**:
    優化登入頁面，特別是「忘記密碼」的流程，以提供更友善的使用者體驗。

---

### 任務 7：優化點餐介面按鈕佈局

1. **目標**:
    將「選擇桌號」按鈕**重疊**在「前往結帳」按鈕之上，強制使用者在結帳前必須先選擇桌號。

---

### 任務 8：移除多餘的 UI 元件

1. **目標**:
    移除點餐畫面右上角舊的「選擇桌號」按鈕，簡化使用者介面。

---

### 任務 9：修復購物車折扣計算錯誤

1. **目標**:
    修復當「滿額折扣」觸發時，總計金額錯誤地顯示為折扣金額，而非折扣後的最終金額的問題。

---

### 任務 10：提升儀表板訂單按鈕可及性

1. **目標**:
    為了方便高齡使用者，將儀表板中訂單卡片的操作按鈕（完成、取消等）尺寸顯著加大，提升點擊的友善度。

---

### 任務 11：調整訂單卡片狀態標籤位置

1. **目標**:
    將訂單狀態標籤（例如「處理中」）從卡片底部移動到頂部，與訂單編號並列，以優化資訊呈現的直觀性。

---

### 任務 12：進一步提升訂單標頭的可及性

1. **目標**:
    為了讓訂單卡片的標頭資訊更清晰，將統一放大「訂單編號」、「狀態標籤」以及「垃圾桶按鈕」的尺寸，使其視覺上更一致、更易於閱讀和操作。

---

### 任務 13：壓縮訂單卡片資訊佈局

1. **目標**:
    為了縮短訂單卡片的整體長度，將「座位」、「時間」和「支付方式」這三項詳細資訊，從原本的垂直三行，合併為水平排列的單行。

---

### 任務 14：優化訂單總金額顯示樣式

1. **目標**:
    將訂單卡片中的「總金額」文字置中顯示，並將其字體適度放大，使其成為卡片的核心視覺焦點，方便店家快速確認金額。

---

### 任務 15：重構套餐顯示邏輯

1.  **目標**：
    徹底解決套餐附餐（如白飯、飲料）與單點品項被合併計算，導致訂單混亂的問題。將重構核心資料結構與相關介面，確保在購物車、後台訂單及列印單據上，都能清晰地呈現主餐與其附餐的層級關係。

2.  **執行步驟**：
    *   [x] **第一階段：改造資料結構 (`orders.ts`)**：在 `OrderItem` 型別中加入 `subItems` 陣列，為應用程式注入理解層級關係的能力。
    *   [x] **第二階段：改造套餐選擇的輸出 (`SetMealModal.vue`)**：重構 `SetMealModal.vue`，使其輸出一個結構完整的「套餐包裹」，而非散裝的品項陣列。
    *   [x] **第三階段：改造購物車的核心邏輯 (`PointOfSale.vue`)**：改造購物車的大腦，使其能夠接收、儲存並處理新的「套餐包裹」，並將完整的層級結構傳遞給訂單系統。
    *   [x] **第四階段：更新所有相關的 UI (`CartSidebar.vue`, `OrderCard.vue`, `PrintReceipt.vue`)**：依次更新購物車、後台訂單卡片及列印單據，使其都能透過巢狀結構清晰地展示套餐內容。

---

### 任務 16：調整收據列印樣式

1. **目標**:
    將訂單收據的列印寬度調整為 `80mm`，以符合常見的熱感式印表機，並對 class 名稱進行語意化調整。

---

### 任務 17：優化訂位人數選擇介面

1. **目標**:
    為了提升在平板裝置上的操作體驗，將「新增/編輯訂位」彈窗中的「訂位人數」與「嬰兒座椅」的數字輸入框，從點擊式改造為更直覺的**拖曳滾動**模式，並將兩者並排顯示。

---

### 任務 18：固定點餐畫面的商品為三欄式佈局

1. **目標**:
    為了在網頁與平板上提供一致的視覺體驗，將點餐畫面的商品列表從響應式佈局修改為固定的三欄式佈局，確保一排始終顯示三個品項。

---

### 任務 19：修復訂單刪除功能

1. **目標**:
    修復因不正確地解構 Pinia store 的 action，導致即時訂單總覽中的刪除按鈕失效的問題。
